var k=Object.defineProperty;var N=s=>{throw TypeError(s)};var ee=(s,e,r)=>e in s?k(s,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):s[e]=r;var Y=(s,e,r)=>ee(s,typeof e!="symbol"?e+"":e,r),$=(s,e,r)=>e.has(s)||N("Cannot "+r);var n=(s,e,r)=>($(s,e,"read from private field"),r?r.call(s):e.get(s)),h=(s,e,r)=>e.has(s)?N("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(s):e.set(s,r),j=(s,e,r,t)=>($(s,e,"write to private field"),t?t.call(s,r):e.set(s,r),r);import{c as F,P as se,Q as A,R as re,T as K,U as C,h as te,V as ne,W as ie,X as ae,Y as fe,Z as ue,_ as Z,$ as ce,a0 as oe,a1 as le,F as w,B as G,a2 as T,a3 as de,a4 as E,a5 as pe,a6 as Q,v as he,a7 as _e,M as ve,a8 as be,a9 as q,aa as z,ab as Pe,u as Se,g as me,ac as ge,ad as we,ae as g,S as V,af as W,ag as Oe,ah as xe}from"./CkdW0rvu.js";var l,p,c,_,O,x,D;class Me{constructor(e,r=!0){Y(this,"anchor");h(this,l,new Map);h(this,p,new Map);h(this,c,new Map);h(this,_,new Set);h(this,O,!0);h(this,x,()=>{var e=F;if(n(this,l).has(e)){var r=n(this,l).get(e),t=n(this,p).get(r);if(t)se(t),n(this,_).delete(r);else{var i=n(this,c).get(r);i&&(n(this,p).set(r,i.effect),n(this,c).delete(r),i.fragment.lastChild.remove(),this.anchor.before(i.fragment),t=i.effect)}for(const[a,o]of n(this,l)){if(n(this,l).delete(a),a===e)break;const f=n(this,c).get(o);f&&(A(f.effect),n(this,c).delete(o))}for(const[a,o]of n(this,p)){if(a===r||n(this,_).has(a))continue;const f=()=>{if(Array.from(n(this,l).values()).includes(a)){var v=document.createDocumentFragment();ie(o,v),v.append(K()),n(this,c).set(a,{effect:o,fragment:v})}else A(o);n(this,_).delete(a),n(this,p).delete(a)};n(this,O)||!t?(n(this,_).add(a),re(o,f,!1)):f()}}});h(this,D,e=>{n(this,l).delete(e);const r=Array.from(n(this,l).values());for(const[t,i]of n(this,c))r.includes(t)||(A(i.effect),n(this,c).delete(t))});this.anchor=e,j(this,O,r)}ensure(e,r){var t=F,i=ae();if(r&&!n(this,p).has(e)&&!n(this,c).has(e))if(i){var a=document.createDocumentFragment(),o=K();a.append(o),n(this,c).set(e,{effect:C(()=>r(o)),fragment:a})}else n(this,p).set(e,C(()=>r(this.anchor)));if(n(this,l).set(t,e),i){for(const[f,d]of n(this,p))f===e?t.skipped_effects.delete(d):t.skipped_effects.add(d);for(const[f,d]of n(this,c))f===e?t.skipped_effects.delete(d.effect):t.skipped_effects.add(d.effect);t.oncommit(n(this,x)),t.ondiscard(n(this,D))}else te&&(this.anchor=ne),n(this,x).call(this)}}l=new WeakMap,p=new WeakMap,c=new WeakMap,_=new WeakMap,O=new WeakMap,x=new WeakMap,D=new WeakMap;let I=!1,M=Symbol();function Te(s,e,r){const t=r[e]??(r[e]={store:null,source:ce(void 0),unsubscribe:Z});if(t.store!==s&&!(M in r))if(t.unsubscribe(),t.store=s??null,s==null)t.source.v=void 0,t.unsubscribe=Z;else{var i=!0;t.unsubscribe=oe(s,a=>{i?t.source.v=a:G(t.source,a)}),i=!1}return s&&M in r?le(s):w(t.source)}function Be(){const s={};function e(){fe(()=>{for(var r in s)s[r].unsubscribe();ue(s,M,{enumerable:!1,value:!0})})}return[s,e]}function ye(s){var e=I;try{return I=!1,[s(),I]}finally{I=e}}const Ie={get(s,e){if(!s.exclude.includes(e))return w(s.version),e in s.special?s.special[e]():s.props[e]},set(s,e,r){if(!(e in s.special)){var t=T;try{z(s.parent_effect),s.special[e]=Re({get[e](){return s.props[e]}},e,Q)}finally{z(t)}}return s.special[e](r),q(s.version),!0},getOwnPropertyDescriptor(s,e){if(!s.exclude.includes(e)&&e in s.props)return{enumerable:!0,configurable:!0,value:s.props[e]}},deleteProperty(s,e){return s.exclude.includes(e)||(s.exclude.push(e),q(s.version)),!0},has(s,e){return s.exclude.includes(e)?!1:e in s.props},ownKeys(s){return Reflect.ownKeys(s.props).filter(e=>!s.exclude.includes(e))}};function Le(s,e){return new Proxy({props:s,exclude:e,special:{},version:de(0),parent_effect:T},Ie)}const De={get(s,e){let r=s.props.length;for(;r--;){let t=s.props[r];if(g(t)&&(t=t()),typeof t=="object"&&t!==null&&e in t)return t[e]}},set(s,e,r){let t=s.props.length;for(;t--;){let i=s.props[t];g(i)&&(i=i());const a=E(i,e);if(a&&a.set)return a.set(r),!0}return!1},getOwnPropertyDescriptor(s,e){let r=s.props.length;for(;r--;){let t=s.props[r];if(g(t)&&(t=t()),typeof t=="object"&&t!==null&&e in t){const i=E(t,e);return i&&!i.configurable&&(i.configurable=!0),i}}},has(s,e){if(e===V||e===W)return!1;for(let r of s.props)if(g(r)&&(r=r()),r!=null&&e in r)return!0;return!1},ownKeys(s){const e=[];for(let r of s.props)if(g(r)&&(r=r()),!!r){for(const t in r)e.includes(t)||e.push(t);for(const t of Object.getOwnPropertySymbols(r))e.includes(t)||e.push(t)}return e}};function Ue(...s){return new Proxy({props:s},De)}function Re(s,e,r,t){var L;var i=!me||(r&ge)!==0,a=(r&Pe)!==0,o=(r&Oe)!==0,f=t,d=!0,v=()=>(d&&(d=!1,f=o?Se(t):t),f),P;if(a){var X=V in s||W in s;P=((L=E(s,e))==null?void 0:L.set)??(X&&e in s?u=>s[e]=u:void 0)}var S,B=!1;a?[S,B]=ye(()=>s[e]):S=s[e],S===void 0&&t!==void 0&&(S=v(),P&&(i&&pe(),P(S)));var b;if(i?b=()=>{var u=s[e];return u===void 0?v():(d=!0,u)}:b=()=>{var u=s[e];return u!==void 0&&(f=void 0),u===void 0?f:u},i&&!(r&Q))return b;if(P){var H=s.$$legacy;return function(u,y){return arguments.length>0?((!i||!y||H||B)&&P(y?b():u),u):b()}}var R=!1,m=(r&we?ve:be)(()=>(R=!1,b()));a&&w(m);var J=T;return function(u,y){if(arguments.length>0){const U=y?w(m):i&&a?he(u):u;return G(m,U),R=!0,f!==void 0&&(f=U),u}return xe&&R||J.f&_e?m.v:w(m)}}export{Me as B,Be as a,Te as b,Le as l,Re as p,Ue as s};
