import{c as pe,a as k,d as Qe,f as L,s as Y,t as Ce}from"../chunks/BYmQm_K7.js";import{i as Ye}from"../chunks/C7KLp8Ib.js";import{o as De}from"../chunks/gQM_sqfA.js";import{f as ve,o as He,v as qe,C as ne,z as x,A as N,x as T,y as Ue,B as q,F as s,D as m,ao as et,O as Ve}from"../chunks/CkdW0rvu.js";import{I as xe,s as ye,f as tt,c as ce,e as ke,a as We}from"../chunks/DRk26lIn.js";import{i as F}from"../chunks/CWqDlYIa.js";import{t as de,s as st,a as rt,f as it,b as ot}from"../chunks/CzwrTgOG.js";import{S as ae}from"../chunks/DFfcadVj.js";import{Z as lt}from"../chunks/CpfnJExW.js";import{l as be,s as _e}from"../chunks/CYp6EUhF.js";import{T as nt}from"../chunks/tAGe-Rmz.js";import{C as at}from"../chunks/BYZeGjKy.js";import{X as ut}from"../chunks/DBzTflVO.js";import{p as ct}from"../chunks/IdXIzJAH.js";function dt(n,i){const a=be(i,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.555.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */const e=[["path",{d:"M10 5a2 2 0 0 0-1.344.519l-6.328 5.74a1 1 0 0 0 0 1.481l6.328 5.741A2 2 0 0 0 10 19h10a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2z"}],["path",{d:"m12 9 6 6"}],["path",{d:"m18 9-6 6"}]];xe(n,_e({name:"delete"},()=>a,{get iconNode(){return e},children:(r,d)=>{var y=pe(),I=ve(y);ye(I,i,"default",{}),k(r,y)},$$slots:{default:!0}}))}function ft(n,i){const a=be(i,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.555.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */const e=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5"}],["path",{d:"M9 18h6"}],["path",{d:"M10 22h4"}]];xe(n,_e({name:"lightbulb"},()=>a,{get iconNode(){return e},children:(r,d)=>{var y=pe(),I=ve(y);ye(I,i,"default",{}),k(r,y)},$$slots:{default:!0}}))}function pt(n,i){const a=be(i,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.555.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */const e=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"}],["path",{d:"M3 3v5h5"}]];xe(n,_e({name:"rotate-ccw"},()=>a,{get iconNode(){return e},children:(r,d)=>{var y=pe(),I=ve(y);ye(I,i,"default",{}),k(r,y)},$$slots:{default:!0}}))}function vt(n){switch(n){case"Easy":return{maxNumber:10,operators:["+"],gridSize:2};case"Medium":return{maxNumber:20,operators:["+","-"],gridSize:3};case"Hard":return{maxNumber:50,operators:["+","-","Ã—"],gridSize:4};case"Expert":return{maxNumber:99,operators:["+","-","Ã—","Ã·"],gridSize:5};default:return{maxNumber:10,operators:["+"],gridSize:2}}}function A(n,i){return Math.floor(Math.random()*(i-n+1))+n}function Ae(n){return n[Math.floor(Math.random()*n.length)]}function fe(n,i,a){switch(i){case"+":return n+a;case"-":return n-a;case"Ã—":return n*a;case"Ã·":return n/a}}function gt(n){let i,a,e,r=Ae(n.operators),d=0;do d++,i=A(1,n.maxNumber),a=A(1,n.maxNumber),r==="Ã·"&&(a=A(1,10),i=a*A(1,10)),r==="-"&&i<a&&([i,a]=[a,i]),e=fe(i,r,a);while((e<0||e>n.maxNumber*2||!Number.isInteger(e))&&d<100);return{num1:i,op:r,num2:a,result:e}}function mt(n){const i=vt(n);let a=1;switch(n){case"Medium":a=4;break;case"Hard":a=8;break;case"Expert":a=12;break}const e=new Map,r=gt(i),d=(c,v,p,W)=>{const b=[c.num1,c.op,c.num2,"=",c.result];for(let f=0;f<b.length;f++){const h=W==="horizontal"?v:v+f,S=W==="horizontal"?p+f:p,V=`${h},${S}`;let M="number";b[f]==="="?M="equals":["+","-","Ã—","Ã·"].includes(String(b[f]))&&(M="operator");const w={id:V,row:h,col:S,value:b[f],displayValue:b[f],isInput:!1,type:M};e.set(V,w)}};d(r,0,0,"horizontal");let y=1,I=0;const U=i.gridSize;for(;y<U&&I<50;){I++;const v=Array.from(e.values()).filter(w=>w.type==="number");if(v.length===0)break;const p=v[Math.floor(Math.random()*v.length)],W=e.has(`${p.row},${p.col-1}`)||e.has(`${p.row},${p.col+1}`),b=e.has(`${p.row-1},${p.col}`)||e.has(`${p.row+1},${p.col}`);let f="horizontal";if(W&&!b)f="vertical";else if(!W&&b)f="horizontal";else continue;const h=Number(p.value),S=Math.floor(Math.random()*3);let V=null;const M=Ae(i.operators);if(S===0){const w=A(1,i.maxNumber),_=fe(h,M,w);_>0&&Number.isInteger(_)&&_<=i.maxNumber*2&&(V={num1:h,op:M,num2:w,result:_})}else if(S===1){A(h,i.maxNumber*2);const w=A(1,i.maxNumber),_=fe(w,M,h);_>0&&Number.isInteger(_)&&(V={num1:w,op:M,num2:h,result:_})}else{let w=A(1,h);(M==="Ã—"||M==="Ã·")&&(w=A(1,10));let _;M==="+"?_=h-w:M==="-"?_=w-h:M==="Ã—"?_=h/w:M==="Ã·"&&(_=w/h),_&&_>0&&Number.isInteger(_)&&Math.abs(fe(w,M,_)-h)<.001&&(V={num1:w,op:M,num2:_,result:h})}if(V){const w=S===0?0:S===1?2:4,_=f==="horizontal"?p.row:p.row-w,X=f==="horizontal"?p.col-w:p.col;let se=!1;const J=[V.num1,V.op,V.num2,"=",V.result];for(let K=0;K<J.length;K++){if(K===w)continue;const re=f==="horizontal"?_:_+K,ge=f==="horizontal"?X+K:X,ue=`${re},${ge}`;if(e.has(ue)){se=!0;break}}se||(d(V,_,X,f),y++)}}let E=1/0,O=1/0,B=-1/0,G=-1/0;for(const c of e.values())E=Math.min(E,c.row),O=Math.min(O,c.col),B=Math.max(B,c.row),G=Math.max(G,c.col);const D=Array.from(e.values()).map(c=>({...c,row:c.row-E,col:c.col-O})),ee=[];D.forEach(c=>{if(c.type==="equals"||c.type==="operator")return;const v=.3+Math.min(a,10)*.03;Math.random()<v&&(c.isInput=!0,ee.push(c.value),c.displayValue=null)});const te=Math.min(3+Math.floor(a/3),8);for(let c=0;c<te;c++)ee.push(A(1,i.maxNumber));const Z=[];for(let c=0;c<=B-E;c++){let v=[];for(let p=0;p<=G-O;p++)D.find(b=>b.row===c&&b.col===p)?v.push({row:c,col:p}):(v.length>=3&&v.some(f=>{const h=D.find(S=>S.row===f.row&&S.col===f.col);return(h==null?void 0:h.type)==="equals"})&&Z.push({cells:[...v]}),v=[]);v.length>=3&&v.some(W=>{const b=D.find(f=>f.row===W.row&&f.col===W.col);return(b==null?void 0:b.type)==="equals"})&&Z.push({cells:[...v]})}for(let c=0;c<=G-O;c++){let v=[];for(let p=0;p<=B-E;p++)D.find(b=>b.row===p&&b.col===c)?v.push({row:p,col:c}):(v.length>=3&&v.some(f=>{const h=D.find(S=>S.row===f.row&&S.col===f.col);return(h==null?void 0:h.type)==="equals"})&&Z.push({cells:[...v]}),v=[]);v.length>=3&&v.some(W=>{const b=D.find(f=>f.row===W.row&&f.col===W.col);return(b==null?void 0:b.type)==="equals"})&&Z.push({cells:[...v]})}return{cells:D,rows:B-E+1,cols:G-O+1,options:ht(ee),equations:Z}}function ht(n){for(let i=n.length-1;i>0;i--){const a=Math.floor(Math.random()*(i+1));[n[i],n[a]]=[n[a],n[i]]}return n}function je(n){try{const i=n.map(E=>E.displayValue);if(i.some(E=>E===null||E===""))return!1;const a=i,e=a.indexOf("=");if(e===-1)return!1;const r=a.slice(0,e),d=a.slice(e+1),y=E=>["+","-","Ã—","Ã·"].includes(String(E))?String(E):Number(E),I=Re(r.map(y)),U=Re(d.map(y));return Math.abs(I-U)<.001}catch{return!1}}function Re(n){let i=[...n];for(let e=1;e<i.length-1;e+=2){const r=i[e];if(r==="Ã—"||r==="Ã·"){const d=Number(i[e-1]),y=Number(i[e+1]);let I=0;r==="Ã—"?I=d*y:I=d/y,i.splice(e-1,3,I),e-=2}}let a=Number(i[0]);for(let e=1;e<i.length;e+=2){const r=i[e],d=Number(i[e+1]);r==="+"?a+=d:r==="-"&&(a-=d)}return a}var xt=L('<div class="flex items-center gap-1 text-gray-500 font-medium text-sm"><!> <span> </span></div>'),yt=L("<div><!></div>"),bt=L("<button> </button>"),_t=L("<div> </div>"),wt=L('<div class="relative bg-white"><!></div>'),Mt=L('<div class="flex items-center justify-center"><div class="grid gap-px bg-gray-300 border-2 border-gray-300 shadow-lg"></div></div>'),$t=L('<button class="bg-white hover:bg-indigo-50 active:bg-indigo-100 p-0 w-10 h-10 sm:w-12 sm:h-12 rounded-xl shadow-sm border-2 border-gray-200 active:border-indigo-400 active:translate-y-0.5 transition-all text-lg font-bold text-gray-700 flex items-center justify-center"> </button>'),Et=L('<div class="text-center text-xs text-gray-400 font-medium">All numbers placed!</div>'),zt=L('<div class="fixed bottom-0 left-0 w-full bg-white border-t border-gray-200 p-4 shadow-[0_-4px_20px_-5px_rgba(0,0,0,0.1)] z-50 rounded-t-3xl"><div class="max-w-4xl mx-auto flex flex-col gap-3"><div class="flex justify-between items-center"><span class="text-xs font-bold text-gray-500 uppercase tracking-wider">Select Number</span> <button class="p-1 rounded-full hover:bg-gray-100 text-gray-400"><!></button></div> <div class="flex flex-wrap justify-center gap-2"><!> <button class="bg-red-50 hover:bg-red-100 active:bg-red-200 w-10 h-10 sm:w-12 sm:h-12 rounded-xl shadow-sm border-2 border-red-200 active:border-red-300 active:translate-y-0.5 transition-all text-red-600 flex items-center justify-center" title="Clear Cell"><!></button></div> <!></div></div>'),It=L('<div class="flex flex-col h-full w-full bg-gray-50 relative overflow-hidden"><div class="w-full bg-white border-b border-gray-200 px-4 py-2 flex flex-col items-center justify-between shadow-sm z-10 shrink-0"><div class="flex items-center justify-between gap-3 w-full"><div class="flex items-center gap-2 bg-indigo-50 rounded-lg p-1"><select class="bg-transparent text-xs font-bold text-indigo-700 border-none focus:ring-0 cursor-pointer py-0 pl-1 pr-6"><option>Easy</option><option>Medium</option><option>Hard</option><option>Expert</option></select></div> <button><!> <span class="hidden sm:inline">Instant</span></button> <button class="flex items-center gap-1.5 text-gray-500 font-bold hover:bg-gray-100 px-2.5 py-1 rounded-lg transition-colors text-sm" title="Restart Level"><!> <span class="hidden sm:inline">Restart</span></button></div> <div class="flex items-center gap-6"><!> <button class="flex items-center gap-1 text-yellow-600 font-bold disabled:opacity-30 disabled:cursor-not-allowed hover:bg-yellow-50 px-2 py-1 rounded-lg transition-colors text-sm"><!> <span> </span></button> <div class="flex items-center gap-1.5 text-green-600 font-bold text-sm"><!> <span> </span></div></div></div> <div class="flex-1 overflow-auto relative flex flex-col items-center justify-center p-2 pb-32"><!> <!></div> <!></div>');function Nt(n,i){He(i,!0);const a={score:0,highScore:0,puzzlesSolved:0,failures:0};let e=qe({difficulty:"Easy",hints:3,instantMode:!1,progress:{Easy:{...a},Medium:{...a},Hard:{...a},Expert:{...a}}}),r=ne(null),d=ne(null),y=ne(null),I=ne(!1),U=ne(qe([]));De(()=>{const t=ae.load("math-crossing");if(t)if("score"in t){let o=t.difficulty||"Easy";["Easy","Medium","Hard","Expert"].includes(o)||(o="Easy");const u=o;e.difficulty=u,e.hints=t.hints??3,e.instantMode=t.instantMode||!1,e.progress[u]={score:t.score||0,highScore:t.highScore||0,puzzlesSolved:t.puzzlesSolved||0,failures:t.failures||0}}else{let o=t.difficulty||"Easy";["Easy","Medium","Hard","Expert"].includes(o)||(o="Easy"),e.difficulty=o,e.hints=t.hints??3,e.instantMode=t.instantMode||!1,t.progress&&(e.progress={...e.progress,...t.progress})}E()});function E(){const t=mt(e.difficulty);q(r,t,!0),q(U,t.options.map((o,u)=>({id:`opt-${u}`,value:o,isUsed:!1})),!0),q(d,null),q(y,null),q(I,!1)}function O(){s(r)&&(s(r).cells.forEach(t=>{t.isInput&&(t.displayValue=null,t.isCorrect=!1,t.isWrong=!1)}),s(U).forEach(t=>t.isUsed=!1),q(d,null),q(y,null),q(I,!1))}function B(t){t.isInput&&q(d,t.id,!0)}function G(t){if(t.isUsed||!s(r)||!s(d))return;const o=s(r).cells.findIndex(l=>l.id===s(d));if(o===-1)return;const u=s(r).cells[o];u.type==="number"&&typeof t.value!="number"||u.type==="operator"&&typeof t.value!="string"||(u.displayValue!==null&&D(u.displayValue),s(r).cells[o].displayValue=t.value,t.isUsed=!0,e.instantMode?te():(v(),s(r).cells.every(l=>!l.isInput||l.displayValue!==null)&&Z()))}function D(t){const o=s(U).find(u=>u.isUsed&&String(u.value)===String(t));o&&(o.isUsed=!1)}function ee(){if(!s(r)||!s(d))return;const t=s(r).cells.findIndex(u=>u.id===s(d));if(t===-1)return;const o=s(r).cells[t];!o.isInput||o.displayValue===null||(D(o.displayValue),s(r).cells[t].displayValue=null,s(r).cells[t].isWrong=!1,s(r).cells[t].isCorrect=!1)}function te(){if(!s(r))return;let t=!1;s(r).equations.forEach(l=>{const g=l.cells.map($=>s(r).cells.find(z=>z.row===$.row&&z.col===$.col));if(g.every($=>$.displayValue!==null)){const $=je(g);g.forEach(z=>{z.isInput&&($?(z.isCorrect=!0,z.isWrong=!1):(z.isWrong=!0,z.isCorrect=!1,t=!0))})}}),s(r).cells.forEach(l=>{if(!l.isInput)return;const C=s(r).equations.filter($=>$.cells.some(z=>z.row===l.row&&z.col===l.col)).filter($=>$.cells.map(H=>s(r).cells.find(R=>R.row===H.row&&R.col===H.col)).every(H=>H.displayValue!==null));C.length>0?C.some(z=>{const H=z.cells.map(R=>s(r).cells.find(j=>j.row===R.row&&j.col===R.col));return!je(H)})?(l.isWrong=!0,l.isCorrect=!1):(l.isCorrect=!0,l.isWrong=!1):(l.isCorrect=!1,l.isWrong=!1)}),t&&(e.progress[e.difficulty].failures++,ae.save("math-crossing",e));const o=s(r).cells.every(l=>!l.isInput||l.displayValue!==null),u=s(r).cells.every(l=>!l.isWrong);o&&u||!t&&o?c():v()}function Z(){if(!s(r))return;te(),q(I,!0),s(r).cells.some(o=>o.isWrong)&&(q(y,"wrong"),setTimeout(()=>q(y,null),2e3))}function c(){q(y,"correct");let t=50;e.difficulty==="Medium"&&(t=100),e.difficulty==="Hard"&&(t=200),e.difficulty==="Expert"&&(t=500),e.progress[e.difficulty].score+=t,e.progress[e.difficulty].score>e.progress[e.difficulty].highScore&&(e.progress[e.difficulty].highScore=e.progress[e.difficulty].score),e.progress[e.difficulty].puzzlesSolved++,e.progress[e.difficulty].puzzlesSolved%3===0&&e.hints++,ae.save("math-crossing",e),setTimeout(()=>E(),2e3)}function v(){if(!s(r)||!s(d))return;const t=s(r).cells.findIndex(u=>u.id===s(d)),o=s(r).cells.find((u,l)=>l>t&&u.isInput&&u.displayValue===null);if(o)q(d,o.id,!0);else{const u=s(r).cells.find(l=>l.isInput&&l.displayValue===null);u?q(d,u.id,!0):q(d,null)}}function p(){if(e.hints<=0||!s(d)||!s(r))return;const t=s(r).cells.findIndex(g=>g.id===s(d));if(t===-1)return;const o=s(r).cells[t];o.displayValue!==null&&D(o.displayValue);const u=o.value,l=s(U).find(g=>!g.isUsed&&String(g.value)===String(u));l&&(l.isUsed=!0,s(r).cells[t].displayValue=u,s(r).cells[t].isCorrect=!0,s(r).cells[t].isWrong=!1,e.hints--,ae.save("math-crossing",e),e.instantMode&&te())}function W(){e.instantMode=!e.instantMode,ae.save("math-crossing",e)}function b(){q(d,null)}var f=It(),h=x(f),S=x(h),V=x(S),M=x(V);M.__change=()=>E();var w=x(M);w.value=w.__value="Easy";var _=N(w);_.value=_.__value="Medium";var X=N(_);X.value=X.__value="Hard";var se=N(X);se.value=se.__value="Expert",m(M),m(V);var J=N(V,2);J.__click=W;var K=x(J);{let t=et(()=>e.instantMode?"fill-indigo-700":"");lt(K,{size:14,get class(){return s(t)}})}Ve(2),m(J);var re=N(J,2);re.__click=O;var ge=x(re);pt(ge,{size:16}),Ve(2),m(re),m(S);var ue=N(S,2),we=x(ue);{var Le=t=>{var o=xt(),u=x(o);at(u,{size:16,class:"text-red-400"});var l=N(u,2),g=x(l,!0);m(l),m(o),T(()=>Y(g,e.progress[e.difficulty].failures)),k(t,o)};F(we,t=>{e.progress[e.difficulty].failures>0&&t(Le)})}var ie=N(we,2);ie.__click=p;var Me=x(ie);ft(Me,{size:16,class:"fill-yellow-600"});var $e=N(Me,2),Oe=x($e,!0);m($e),m(ie);var Ee=N(ie,2),ze=x(Ee);nt(ze,{size:16});var Ie=N(ze,2),Pe=x(Ie,!0);m(Ie),m(Ee),m(ue),m(h);var me=N(h,2),Ne=x(me);{var Te=t=>{var o=yt(),u=x(o);{var l=C=>{var $=Ce("Outstanding! ðŸŽ‰");k(C,$)},g=C=>{var $=Ce("Check your math! ðŸ’ª");k(C,$)};F(u,C=>{s(y)==="correct"?C(l):C(g,!1)})}m(o),T(()=>ce(o,1,`absolute top-2 left-1/2 -translate-x-1/2 z-20 px-4 py-2 rounded-full font-bold text-sm shadow-lg ${s(y)==="correct"?"bg-green-500 text-white":"bg-red-500 text-white"}`)),de(1,o,()=>st),k(t,o)};F(Ne,t=>{s(y)&&t(Te)})}var Fe=N(Ne,2);{var Be=t=>{var o=Mt(),u=x(o);ke(u,21,()=>s(r).cells,l=>l.id,(l,g)=>{var C=wt(),$=x(C);{var z=R=>{var j=bt();j.__click=()=>B(s(g));var oe=x(j,!0);m(j),T(()=>{ce(j,1,`w-full h-full text-lg sm:text-xl font-bold flex items-center justify-center transition-all
                                        ${s(d)===s(g).id?"bg-indigo-50 inset-0 ring-2 ring-indigo-500 z-10":"hover:bg-gray-50"}
                                        ${s(g).isCorrect?"bg-green-50 text-green-700":""}
                                        ${s(g).isWrong?"bg-red-50 text-red-700":""}
                                    `),Y(oe,s(g).displayValue??"")}),k(R,j)},H=R=>{var j=_t(),oe=x(j,!0);m(j),T(()=>{ce(j,1,`w-full h-full flex items-center justify-center text-lg sm:text-xl font-bold
                                    ${s(g).type==="operator"?"text-indigo-500":""}
                                    ${s(g).type==="equals"?"text-gray-400":"text-gray-700"}
                                `),Y(oe,s(g).value)}),k(R,j)};F($,R=>{s(g).isInput?R(z):R(H,!1)})}m(C),T(()=>We(C,`grid-column: ${s(g).col+1}; grid-row: ${s(g).row+1};`)),k(l,C)}),m(u),m(o),T(()=>We(u,`grid-template-columns: repeat(${s(r).cols}, minmax(32px, 48px)); grid-template-rows: repeat(${s(r).rows}, minmax(32px, 48px));`)),k(t,o)};F(Fe,t=>{s(r)&&t(Be)})}m(me);var Ge=N(me,2);{var Ze=t=>{var o=zt(),u=x(o),l=x(u),g=N(x(l),2);g.__click=b;var C=x(g);ut(C,{size:18}),m(g),m(l);var $=N(l,2),z=x($);ke(z,17,()=>s(U),Q=>Q.id,(Q,P)=>{var Se=pe(),Xe=ve(Se);{var Je=he=>{var le=$t();le.__click=()=>G(s(P));var Ke=x(le,!0);m(le),T(()=>Y(Ke,s(P).value)),de(1,le,()=>rt),k(he,le)};F(Xe,he=>{s(P).isUsed||he(Je)})}k(Q,Se)});var H=N(z,2);H.__click=ee;var R=x(H);dt(R,{size:18}),m(H),m($);var j=N($,2);{var oe=Q=>{var P=Et();de(1,P,()=>it),k(Q,P)};F(j,Q=>{s(U).every(P=>P.isUsed)&&Q(oe)})}m(u),m(o),de(3,o,()=>ot,()=>({y:200,duration:300})),k(t,o)};F(Ge,t=>{s(d)&&t(Ze)})}m(f),T(()=>{ce(J,1,`flex items-center gap-1.5 px-2.5 py-1 rounded-lg text-xs font-bold transition-all border ${e.instantMode?"bg-indigo-50 border-indigo-200 text-indigo-700":"bg-white border-gray-200 text-gray-500 hover:bg-gray-50"}`),ie.disabled=e.hints<=0,Y(Oe,e.hints),Y(Pe,e.progress[e.difficulty].score)}),tt(M,()=>e.difficulty,t=>e.difficulty=t),k(n,f),Ue()}Qe(["change","click"]);function Pt(n,i){He(i,!1),De(()=>{ct.set("Math Crossing")}),Ye(),Nt(n,{}),Ue()}export{Pt as component};
